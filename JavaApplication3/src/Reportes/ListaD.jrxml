<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="ListaDeDocumentos" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="3a4b58d7-ccdf-4eed-8946-64b7ab79ff5b">
	<property name="ireport.zoom" value="1.5"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<style name="style1">
		<box topPadding="0" leftPadding="0">
			<pen lineStyle="Solid" lineColor="#000000"/>
			<topPen lineStyle="Solid" lineColor="#000000"/>
			<leftPen lineStyle="Solid" lineColor="#000000"/>
			<bottomPen lineStyle="Solid" lineColor="#000000"/>
			<rightPen lineStyle="Solid" lineColor="#000000"/>
		</box>
	</style>
	<parameter name="NUM_CURSO" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="NUM_CARPETA" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="NOM_CURSO" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[(select  'Carpeta' as Tipo,
		id,
		nombre,
		Carpeta_id as carpetaPadre,fechaCreacion
	from    
		(select * from Carpeta
		order by Carpeta_id, id) Carpeta_sorted,
		(select @pv := $P{NUM_CARPETA}) initialisation
	where
		find_in_set(Carpeta_id, @pv) > 0 and @pv := concat(@pv, ',', id) and habilitado=0)
	UNION
	(select  'Documento' as Tipo,
	d.id,
	d.nombre,
	d.Carpeta_id as carpetaPadre,fechaCreacion
	from    Documentos d,Doc_docente c

	where d.id=c.Documentos_Id and c.CursoXCiclo_Curso_idCurso=$P{NUM_CURSO}  and habilitado=1) UNION
	 (select  'Evaluacion' as Tipo,
	d.id,
	d.nombre,
	d.Carpeta_id as carpetaPadre,fechaCreacion
	from    Documentos d,Doc_Evaluacion c
	where d.id=c.Documentos_Id and c.CursoXCiclo_Curso_idCurso=$P{NUM_CURSO} and habilitado=1)
	order by carpetaPadre;]]>
	</queryString>
	<field name="Tipo" class="java.lang.String"/>
	<field name="id" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="nombre" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="carpetaPadre" class="java.lang.Integer"/>
	<field name="fechaCreacion" class="java.sql.Date">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="79" splitType="Stretch">
			<image>
				<reportElement x="336" y="0" width="219" height="79" uuid="81660fa3-8518-4c93-9f2d-3bbbc55a6f89"/>
				<imageExpression><![CDATA["C:\\Users\\Oscar\\Documents\\lp2\\clase10\\ProyectoLp2Java\\JavaApplication3\\src\\Imagenes\\100pucp.png"]]></imageExpression>
			</image>
			<rectangle>
				<reportElement x="0" y="0" width="334" height="79" backcolor="#006181" uuid="7c5cff7c-751e-42e2-bffe-a97325c6be1b"/>
			</rectangle>
			<staticText>
				<reportElement x="10" y="11" width="53" height="25" forecolor="#FFFFFF" uuid="0ca0c61e-0190-403e-9b1a-04d9c6e5e0cd"/>
				<textElement>
					<font size="13"/>
				</textElement>
				<text><![CDATA[Curso: ]]></text>
			</staticText>
			<staticText>
				<reportElement x="10" y="46" width="43" height="20" forecolor="#FFFFFF" uuid="a9ae9515-7cff-41e7-a3cb-dc950380dcea"/>
				<textElement>
					<font size="13"/>
				</textElement>
				<text><![CDATA[Fecha: ]]></text>
			</staticText>
			<textField pattern="EEEEE dd MMMMM yyyy">
				<reportElement x="63" y="46" width="123" height="20" forecolor="#FFFFFF" uuid="4a629288-91f6-4f05-8ab1-9aa22a165921"/>
				<textElement>
					<font size="13"/>
				</textElement>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="63" y="11" width="247" height="20" forecolor="#FFFFFF" uuid="966d3709-2cff-4622-9ac2-f02f9e036885"/>
				<textElement>
					<font size="13"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{NOM_CURSO}]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<pageHeader>
		<band height="35" splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band height="60" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="15" width="79" height="20" uuid="a5a928af-052d-48dd-8abc-f8a0216185ef"/>
				<textElement>
					<font size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[Tipo]]></text>
			</staticText>
			<staticText>
				<reportElement x="79" y="15" width="44" height="20" uuid="740ab330-ae67-4731-90d6-167e15d76af4"/>
				<textElement>
					<font size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[Id]]></text>
			</staticText>
			<staticText>
				<reportElement x="123" y="15" width="316" height="20" uuid="31a908b0-b527-4981-93c6-7258559ae50c"/>
				<textElement>
					<font size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[Nombre]]></text>
			</staticText>
			<staticText>
				<reportElement x="439" y="15" width="116" height="20" uuid="51a2dcd8-ba32-410b-8e4a-550c99c79bce"/>
				<textElement>
					<font size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[Fecha de CreaciÃ³n]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="125" splitType="Stretch">
			<textField>
				<reportElement style="style1" x="0" y="0" width="79" height="20" uuid="e900bfeb-e921-4fd8-b2c3-ea560e0f0d78"/>
				<textFieldExpression><![CDATA[$F{Tipo}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement style="style1" x="79" y="0" width="44" height="20" uuid="d554df39-1477-475c-a4b1-541148a3e07e"/>
				<textFieldExpression><![CDATA[$F{id}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement style="style1" x="123" y="0" width="316" height="20" uuid="68da0a58-0fdf-489a-8a37-f8285947db32"/>
				<textFieldExpression><![CDATA[$F{nombre}]]></textFieldExpression>
			</textField>
			<textField pattern="">
				<reportElement style="style1" stretchType="RelativeToBandHeight" mode="Transparent" x="439" y="0" width="116" height="20" isRemoveLineWhenBlank="true" uuid="016bc589-7da5-4f64-abab-9e4acd7a416f"/>
				<textFieldExpression><![CDATA[$F{fechaCreacion}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band height="45" splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band height="54" splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band height="42" splitType="Stretch"/>
	</summary>
</jasperReport>
